import{a as w,u as F,r as I,j as e,H as T,L as f,B as l}from"./app-oKcMah4B.js";import{A as k}from"./AppLayout-BkjjBjrr.js";import{L as r,I as o}from"./input-pKAWPIMY.js";import{S as p,a as h,b as j,c as g,d as m}from"./select-IWh58R8R.js";import{D as A,T as N,B as E,S as M}from"./date-picker-B2wNXkp0.js";import{C as O,a as P,b as B,d as L,c as V}from"./card-C115FapS.js";import{A as $,a as H}from"./alert-uwR_on1N.js";import{A as z}from"./arrow-left-BCpD-NTc.js";import{C as u}from"./circle-alert-DnfFBuuy.js";import{F as J}from"./sun-BNKJhPB7.js";/* empty css            */import"./chevron-right-BSH8rqjn.js";import"./popover-B3yyS8N8.js";import"./calendar-CVHVOrJh.js";function ie({types:y,directions:b,availableRegistrations:v,errors:R}){const{toast:x}=w(),{data:s,setData:i,post:C,processing:c,errors:a,reset:S}=F({registration_number:"",direction:"",document_type_id:"",document_type_text:"",page_count:"1",title:"",notes:"",user_identity:"",issued_date:void 0,evidence:null});I.useEffect(()=>{a&&Object.keys(a).length>0&&Object.entries(a).forEach(([t,d])=>{x({variant:"destructive",title:"Validation Error",description:`${t}: ${d}`})})},[a]);const _=(t,d=!1)=>{t.preventDefault();const n=new FormData;n.append("registration_number",s.registration_number),n.append("direction",s.direction),n.append("page_count",s.page_count),n.append("is_draft",d.toString()),s.document_type_id&&n.append("document_type_id",s.document_type_id),s.document_type_text&&n.append("document_type_text",s.document_type_text),s.title&&n.append("title",s.title),s.notes&&n.append("notes",s.notes),s.user_identity&&n.append("user_identity",s.user_identity),s.issued_date&&n.append("issued_date",s.issued_date.toISOString().split("T")[0]),s.evidence&&n.append("evidence",s.evidence),C("/documents",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{x({title:"Success",description:d?"Document saved as draft":"Document created successfully"}),S()},onError:()=>{x({variant:"destructive",title:"Error",description:`Failed to ${d?"save draft":"create document"}. Please check the form.`})}})},D=t=>{_(t,!0)};return e.jsxs(k,{children:[e.jsx(T,{title:"Create Document"}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{href:"/documents",children:e.jsxs(l,{variant:"ghost",size:"sm",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Document"}),e.jsx("p",{className:"text-muted-foreground",children:"Add a new translation document"})]})]}),e.jsxs(O,{children:[e.jsxs(P,{children:[e.jsx(B,{children:"Document Information"}),e.jsx(L,{children:"Fill in the details for the new document"})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"registration_number",children:["Registration Number ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(p,{value:s.registration_number,onValueChange:t=>i("registration_number",t),children:[e.jsx(h,{className:`w-full ${a.registration_number?"border-destructive":""}`,children:e.jsx(j,{placeholder:"Select registration number"})}),e.jsx(g,{children:v.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No available registrations"}):v.map(t=>e.jsxs(m,{value:t.number,children:[t.number," (",t.state,")"]},t.id))})]}),a.registration_number&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),a.registration_number]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"direction",children:["Translation Direction ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(p,{value:s.direction,onValueChange:t=>i("direction",t),children:[e.jsx(h,{className:`w-full ${a.direction?"border-destructive":""}`,children:e.jsx(j,{placeholder:"Select direction"})}),e.jsx(g,{children:b.map(t=>e.jsx(m,{value:t,children:t==="Indo-Mandarin"?"Indonesian → Mandarin":t==="Mandarin-Indo"?"Mandarin → Indonesian":t==="Indo-Taiwan"?"Indonesian → Taiwanese":"Taiwanese → Indonesian"},t))})]}),a.direction&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),a.direction]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"document_type_id",children:"Document Type (Predefined)"}),e.jsxs(p,{value:s.document_type_id,onValueChange:t=>i("document_type_id",t),children:[e.jsx(h,{className:"w-full",children:e.jsx(j,{placeholder:"Select type"})}),e.jsxs(g,{children:[e.jsx(m,{value:"none",children:"None"}),y.map(t=>e.jsx(m,{value:t.id.toString(),children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"document_type_text",children:"Or Custom Type"}),e.jsx(o,{id:"document_type_text",value:s.document_type_text,onChange:t=>i("document_type_text",t.target.value),placeholder:"Enter custom type"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"title",children:"Document Title"}),e.jsx(o,{id:"title",value:s.title,onChange:t=>i("title",t.target.value),placeholder:"Enter document title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"page_count",children:["Page Count ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(o,{id:"page_count",type:"number",min:"1",value:s.page_count,onChange:t=>i("page_count",t.target.value),className:a.page_count?"border-destructive":""}),a.page_count&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),a.page_count]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"issued_date",children:"Issued Date"}),e.jsx(A,{value:s.issued_date,onChange:t=>i("issued_date",t),placeholder:"Pilih tanggal terbit dokumen"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"evidence",children:"Evidence File"}),e.jsx(o,{id:"evidence",type:"file",onChange:t=>i("evidence",t.target.files?.[0]||null),className:"cursor-pointer",accept:".pdf,.doc,.docx"}),s.evidence&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(J,{className:"h-4 w-4"}),s.evidence.name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted: PDF, DOC, DOCX (Max 20MB)"}),a.evidence&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),a.evidence]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"notes",children:"Notes"}),e.jsx(N,{id:"notes",value:s.notes,onChange:t=>i("notes",t.target.value),placeholder:"Add any additional notes or comments...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"user_identity",children:"Identitas Pengguna Jasa"}),e.jsx(N,{id:"user_identity",value:s.user_identity,onChange:t=>i("user_identity",t.target.value),placeholder:"Masukkan identitas pengguna jasa (nama, alamat, dll)...",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Informasi identitas lengkap pengguna jasa yang meminta terjemahan"})]}),e.jsx($,{children:e.jsx(H,{children:"You can save as draft to continue later, or submit the document for processing."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(f,{href:"/documents",className:"flex-1",children:e.jsx(l,{type:"button",variant:"outline",className:"w-full bg-transparent",children:"Cancel"})}),e.jsxs(l,{type:"button",variant:"secondary",onClick:D,disabled:c,className:"flex-1",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),c?"Saving...":"Save as Draft"]}),e.jsxs(l,{type:"submit",disabled:c,className:"flex-1",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),c?"Saving...":"Submit Document"]})]})]})})]})]})]})}export{ie as default};
